<nz-alert class="mb-3 d-block d-sm-none"
          nzMessage="请将手机切换为横屏进行操作！"
          nzShowIcon
          nzType="warning">
</nz-alert>
<div #container [nzGutter]="{ xs: 8, sm: 8, md: 12, lg: 16, xl: 20, xxl: 23 }"
     class="pt-3" nz-row style="background-color: #f0f2f5">
  <div class="mb-4" nz-col nzLg="5" nzMd="6">
    <nz-card [nzBodyStyle]="{'padding':'0'}" [nzTitle]="liveTitle" class="mb-4" nzBordered nzHoverable>
      <img *ngIf="car?.liveUrl;else elseBlock" [src]="car.liveUrl" alt="live" style="width: 100%">
      <ng-template #elseBlock>
        <img alt="live" src="https://via.placeholder.com/320x240" style="width: 100%">
      </ng-template>
    </nz-card>
    <ng-template #liveTitle>
      <i nz-icon theme="outline" type="play-circle"></i> Live
    </ng-template>
    <div class="d-flex justify-content-center mb-4">
      <app-speedometer></app-speedometer>
    </div>
    <div class="d-flex justify-content-center mb-4">
      <app-battery-indicator></app-battery-indicator>
    </div>
  </div>
  <div class="mb-3" nz-col nzLg="14" nzMd="12">
    <nz-card [nzBodyStyle]="{'padding':'0'}" nzBordered nzTitle="实时操作">
      <img alt="live" src="https://via.placeholder.com/320x240" style="width: 100%">
      <!--    <app-model></app-model>-->
    </nz-card>
  </div>
  <div nz-col nzLg="5" nzMd="6">
    <nz-card [nzBodyStyle]="{'padding':'0'}" class="mb-3" nzBordered
             nzHoverable nzTitle="当前驾驶员信息">
      <div *ngIf="!car?.currentDriver;else busy" class="p-4">
        无人使用
      </div>
      <ng-template #busy>
        <img [src]="car.currentDriver.avatar.id|image" alt="" style="width: 100%">
        <div class="p-4">
          <div style="font-weight: bold">
            姓名：
          </div>
          {{car.currentDriver.name}}
          <div class="mt-3" style="font-weight: bold">
            工号：
          </div>
          {{car.currentDriver.employeeId}}
        </div>
      </ng-template>
    </nz-card>
    <nz-card class="mb-3" nzBordered nzHoverable nzTitle="车辆信息">
      <div style="font-weight: bold">
        编号：
      </div>
      {{car?.carId}}
      <div class="mt-3" style="font-weight: bold">
        总运行时间：
      </div>
      <app-timer [initialTime]="car?.totalTime" [paused]="!car?.startDate"
                 class="mb-2"></app-timer>
      <div class="mt-3" style="font-weight: bold">
        连续运行时间：
      </div>
      <app-timer [initialTime]="runningTime" [paused]="!car?.startDate"></app-timer>
    </nz-card>
    <div class="d-flex justify-content-center">
      <button (click)="startDrive()" [disabled]="car?.startDate||!available"
              class="mr-4" nz-button nzSize="large" nzType="primary">启动
      </button>
      <button (click)="finishDrive()" [disabled]="!car?.startDate||!available"
              nz-button nzSize="large" nzType="danger">停止
      </button>
    </div>
  </div>
</div>
